_220527_

## 6.7 변수 이름 바꾸기

### 배경

- 명확한 프로그래밍의 핵심은 `이름짓기` 다.

### 절차

1. 폭넓게 쓰이는 변수라면 `변수 캡슐화하기`를 고려한다.
2. 이름을 바꿀 변수를 참조하는 곳을 모두 찾아서, 하나식 변경한다.

- 다른 코드베이스에서 참조하는 변수는 외부에 공개된 변수이므로 이 리팩터링을 적용할 수 없다.
- 변수 값이 변하지 않는다면 다른 이름으로 복제본을 만들어서 하나씩 점진적으로 변경한다. 하나씩 바꿀 때마다 테스트한다.

3. 테스트한다.

### 예시

```js
let tpHd = "untitled";

// 어떤 참조는 다음과 같이 변수를 읽기만 한다.

result += `<h1>${tpHd}</h1>`;

// 값을 수정하는 곳도 있다고 해보자

tpHd = obj["articleTitle"];
```

1. 보통 이럴 때 주로 `변수 캡슐화하기` 로 처리한다.

```js
result += `<h1>${title()}</h1>`;
setTitle(obj["articleTitle"]);

function title {return tpHd;} // tpHd 변수의 게터
function setTitle(arg) {tpHd = arg;} // tpHd 변수의 세터
```

- 캡슐화 후에는 변수의 이름을 바꿔도 된다.

```js
let _title = "untitled";
function title {return _title}
function setTitle(arg) {_title = arg}
```

### 예시 : 상수 이름 바꾸기

- 상수의 이름은 캡슐화하지 않고도 복제 방식으로 점진적으로 바꿀 수 있다.

```js
const cpyNm = "애크미 구스베리";

// 먼저 원본의 이름을 바꾼 후, 원본의 원래 이름 (기존 이름)과 같은 복제본을 만든다.

const companyName = "애크미 구스베리";
const cpyNm = companyName;
```

- 기존 이름 (복제본)을 참조하는 코드들을 새 이름으로 점진적으로 바꿀 수 있다. 다 바꿨다면 복제본을 삭제한다.
- 기존 이름을 삭제했다가 테스트에 실패하면 되돌리는 방식보다, 새 이름으로 선언한 다음 기존 이름에 복사하는 방식이 조금이라도 쉽다면 후자를 택한다.
- 이 방식은 상수는 물론 클라이언트가 볼 때 읽기전용인 변수 (가령 JS의 익스포트한 변수)에도 적용할 수 있다.

_220527_
